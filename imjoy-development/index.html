



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Demonstrating how to create an ImJoy project">
      
      
        <link rel="canonical" href="https://muellerflorian.github.io/ImJoy-demo-project/imjoy-development/">
      
      
        <meta name="author" content="Florian MUELLER">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="/img/icons8-eukaryotic-cells-filled-100.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>5. ImJoy development - ImJoy demo project</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#imjoy-plugin-development" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://muellerflorian.github.io/ImJoy-demo-project/" title="ImJoy demo project" class="md-header-nav__button md-logo">
          
            <i class="md-icon">wb_sunny</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ImJoy demo project
              </span>
              <span class="md-header-nav__topic">
                5. ImJoy development
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/muellerflorian/ImJoy-demo-project" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Overview" class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://muellerflorian.github.io/ImJoy-demo-project/" title="ImJoy demo project" class="md-nav__button md-logo">
      
        <i class="md-icon">wb_sunny</i>
      
    </a>
    ImJoy demo project
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/muellerflorian/ImJoy-demo-project" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../code-organization/" title="1. Code organization" class="md-nav__link">
      1. Code organization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../github/" title="2. GitHub" class="md-nav__link">
      2. GitHub
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../documentation/" title="3. Documentation" class="md-nav__link">
      3. Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../python-development/" title="4. Python development" class="md-nav__link">
      4. Python development
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        5. ImJoy development
      </label>
    
    <a href="./" title="5. ImJoy development" class="md-nav__link md-nav__link--active">
      5. ImJoy development
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#native-python-plugin" title="Native Python plugin" class="md-nav__link">
    Native Python plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tag-facilitate-development" title="Tag facilitate development" class="md-nav__link">
    Tag facilitate development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-own-module" title="Using own module" class="md-nav__link">
    Using own module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-plugin-user-interface" title="Create plugin user interface" class="md-nav__link">
    Create plugin user interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#showing-results-in-imjoy" title="Showing results in ImJoy" class="md-nav__link">
    Showing results in ImJoy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imjoy-log" title="ImJoy log" class="md-nav__link">
    ImJoy log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plot-results" title="Plot results" class="md-nav__link">
    Plot results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-the-plugin" title="Exporting the plugin" class="md-nav__link">
    Exporting the plugin
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deployment/" title="6. Deployment" class="md-nav__link">
      6. Deployment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../distribution/" title="7. Distribution" class="md-nav__link">
      7. Distribution
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#native-python-plugin" title="Native Python plugin" class="md-nav__link">
    Native Python plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tag-facilitate-development" title="Tag facilitate development" class="md-nav__link">
    Tag facilitate development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-own-module" title="Using own module" class="md-nav__link">
    Using own module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-plugin-user-interface" title="Create plugin user interface" class="md-nav__link">
    Create plugin user interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#showing-results-in-imjoy" title="Showing results in ImJoy" class="md-nav__link">
    Showing results in ImJoy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#imjoy-log" title="ImJoy log" class="md-nav__link">
    ImJoy log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plot-results" title="Plot results" class="md-nav__link">
    Plot results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-the-plugin" title="Exporting the plugin" class="md-nav__link">
    Exporting the plugin
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="imjoy-plugin-development">ImJoy plugin development<a class="headerlink" href="#imjoy-plugin-development" title="Permanent link">&para;</a></h1>
<p>To launch ImJoy, simply open a browser and open <strong><a href="https://imjoy.io">https://imjoy.io</a></strong>.</p>
<p>You can then either check of some of the ImJoy plugins, or start working on your plugin.</p>
<h2 id="native-python-plugin">Native Python plugin<a class="headerlink" href="#native-python-plugin" title="Permanent link">&para;</a></h2>
<p>You can add a plugin template with the <code>+ PLUGINS</code> button.
For this simple tutorial, we create a <strong>native python</strong> plugin.</p>
<p>However, this plugin type requires the plugin engine. Yo can find a dedicate section
in the ImJoy user manual for how to install the engine with this
<a href="https://imjoy.io/docs/#/user_manual?id=imjoy-app-and-plugin-engine">link</a>.</p>
<p>Once you have the engine running and connected to ImJoy, you can save and execute
your plugins. The first step is to fill out some fields of the <code>&lt;config&gt;</code> block. To get started,
we name the plugin <code>Sine Calculator</code> (field <code>name</code>) and give a short description (<code>description</code>).</p>
<p><img src="../img/screenshot-plugin-config.png" width="700px"></img></p>
<p>We can then save the plugin from its toolbar. Once save the plugin will show up with its
name in the plugin interface, and have a little rocket 🚀 next to its name. This indicates
that the plugin is powered by the plugin engine. Pressing on its name will run it,
for the template plugin it will simply show <code>Hello world</code> in the plugin engine.</p>
<p><img src="../img/screenshot-plugin-menu.png" width="400px"></img></p>
<h2 id="tag-facilitate-development">Tag facilitate development<a class="headerlink" href="#tag-facilitate-development" title="Permanent link">&para;</a></h2>
<p>A very useful features are <code>tags</code> to change how a plugin is executed. Here we use
tags to differentiate between a development and stable release version. For this,
we add the following definition to the <config> block where we have three different
tags:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;tags&quot;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&quot;stable&quot;</span><span class="p">,</span><span class="s2">&quot;dev-local&quot;</span><span class="p">,</span><span class="s2">&quot;dev-github&quot;</span><span class="p">]</span>
</pre></div>

<p>When you save your plugin, these tags will show up in the bar of the code editor.
For the next steps, select <code>dev-local</code>.</p>
<p><strong>More information</strong> on tags can be found <a href="https://imjoy.io/docs/#/development?id=tags">here</a></p>
<h2 id="using-own-module">Using own module<a class="headerlink" href="#using-own-module" title="Permanent link">&para;</a></h2>
<p>During development, we will use our locally stored module.
This can be done in the <code>&lt;script&gt;</code> block. Here we have to add the
absolute path of the module <code>PathToModule</code> to the Python system path.
Please note the <code>importlib.reload</code> allows to reload the library if you have changes.</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="o">&gt;</span>

<span class="k">if</span> <span class="s1">&#39;dev-local&#39;</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">TAG</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">importlib</span>
    <span class="kn">import</span> <span class="nn">sys</span>

    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;PathToModule&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">outils</span>
    <span class="n">importlib</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">outils</span><span class="p">)</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>

<p>We can then use this module in our Python code.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">class</span> <span class="nc">ImJoyPlugin</span><span class="p">():</span>

    <span class="c1"># Run upon plugin execution</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my</span><span class="p">):</span>
       <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">outils</span><span class="o">.</span><span class="n">calc_sine</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
       <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;x values: {x}&#39;</span><span class="p">)</span>
       <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;y values: {y}&#39;</span><span class="p">)</span>
</pre></div>

<p>When running the plugin, the calculated vectors will be shown in the Python plugin engine.</p>
<p><strong>Note 1</strong>: that the engine does not support any graphics. We will show you how
to plot the data further down.</p>
<p><strong>Note 2</strong>:  <code>import asyncio</code> and <code>async def</code> are used to permit asynchronous
function calls. For more details see <a href="https://imjoy.io/docs/#/api?id=asynchronous-programming">here</a>.</p>
<h2 id="create-plugin-user-interface">Create plugin user interface<a class="headerlink" href="#create-plugin-user-interface" title="Permanent link">&para;</a></h2>
<p>For our example, the user has to specify how many data-points should be calculated.
The easiest way to obtain user input is by using the plugin user interface.
This can be done with the <code>ui</code> string the the <code>&lt;config</code> block.</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;ui&quot;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&quot;# of data points : {id:&#39;n_points&#39;, type: &#39;number&#39;, min: 0, placeholder:20}&quot;</span><span class="p">]</span>
</pre></div>

<p>After saving the plugin, it has now a little menu that you can show by pressing
on the arrow down symbol next to its name.</p>
<p><img src="../img/screenshot-plugin-interface.png" width="400px"></img></p>
<p>Each parameter that you specify in such an interface, can be retrieved by its
unique <code>id</code> from the object <code>my</code>, e.g. <code>my.config.n_points</code> for our example. To now
perform the calculations with the user specified number of points, simply use</p>
<div class="codehilite"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">outils</span><span class="o">.</span><span class="n">calc_sine</span><span class="p">(</span><span class="n">my</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">n_points</span><span class="p">)</span>
</pre></div>

<p><strong>Further information</strong></p>
<ul>
<li>For more infos on the <code>ui</code> string, see <a href="https://imjoy.io/docs/#/development?id=ui">here</a>.</li>
<li>For more advanced interfaces, you can use a <code>window</code> plugin that allows you
   to design an interface with HTML. We more information we refer to a dedicated
   dem <a href="https://imjoy.io/docs/#/demos?id=user-interface-calling-python-worker">here</a>.</li>
</ul>
<h2 id="showing-results-in-imjoy">Showing results in ImJoy<a class="headerlink" href="#showing-results-in-imjoy" title="Permanent link">&para;</a></h2>
<p>This plugin is executed in the plugin engine, where we used <code>print</code> to show
some results. However, we would like to show plots and more detailed feedback
directly in the ImJoy app. For this, ImJoy provides a number of dedicated
<a href="https://imjoy.io/docs/#/api?id=api-functions"><strong>API functions</strong></a>.</p>
<h3 id="imjoy-log">ImJoy log<a class="headerlink" href="#imjoy-log" title="Permanent link">&para;</a></h3>
<p>For example, we could replace the <code>print</code> statements with the api function <code>api.log</code>.</p>
<div class="codehilite"><pre><span></span><span class="n">api</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;y values: {y}&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;y values: {y}&#39;</span><span class="p">)</span>
</pre></div>

<p>This then shows the results in the plugin specific log, which can be opened by
clicking on the grey inverted exclamation mark next to the plugin name. Note that
this log can be cleared and exported.</p>
<p><img src="../img/screenshot-plugin-log.png" width="400px"></img></p>
<h3 id="plot-results">Plot results<a class="headerlink" href="#plot-results" title="Permanent link">&para;</a></h3>
<p>The undoubtedly best way to show these data is with a plot.</p>
<p>In order to do this, we require a second plugin, this time a <code>window</code> plugin,
which will display data it receives. We use HTML to determine how the plugin
looks like, and JavaScript how the window plugin show process received data.
An excellent introduction to HTML, JavaScript with hands-on example is <a href="https://www.w3schools.com/">w3schools.com/</a>.</p>
<p>We create a template window plugin, and name it <code>Charts JS</code>. You can find the
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Charts%20JS.imjoy.html" target="_blank"> <strong>full  here &gt;&gt;</strong></a>,
and we will reference specific sections throughout the explanations here.</p>
<p>This plugin is only useful when called from another plugin, which can be specified
in the <code>&lt;config&gt;</code> block. Such a <strong>"helper" plugin</strong> will show up in the plugin window, but
it will be greyed out and can't be run by clicking on its name.
<div class="codehilite"><pre><span></span><span class="s2">&quot;runnable&quot;</span><span class="err">:</span> <span class="kc">false</span>
</pre></div>
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Charts%20JS.imjoy.html#L20" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
<p>Many JavaScript libraries permit interactive plotting of data. Here, we used
<a href="https://plot.ly/javascript/"><strong>Plotly.js</strong></a>, a very rich library for interactive
data visualisation. To use this library, you have to specify
it in the requirements</p>
<p><div class="codehilite"><pre><span></span><span class="s2">&quot;requirements&quot;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&quot;https://cdn.plot.ly/plotly-latest.min.js&quot;</span><span class="p">]</span>
</pre></div>
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Charts%20JS.imjoy.html#L20" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
<p><strong>Ploty show its plots</strong> in so called HTML division <code>&lt;div&gt;. We can add such a
division to the</code><window><code>block of the plugin, and give it the id</code>chart`.</p>
<p><div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">window</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;html&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;chart&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">window</span><span class="p">&gt;</span>
</pre></div>
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Charts%20JS.imjoy.html#L55" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
<p>Then we have to tell the plugin how to <strong>display data it received</strong>. If an ImJoy plugin
is called by another plugin, it can receive data in the <code>my.data</code> object in its run function.
In this run function, we the simply create the variables that are needed by Plotly
to show data. We determine:
1.  Where we should plot: the <code>&lt;div&gt;</code> element named <code>chart</code>
0.  What and how we should plot: the <code>x</code>, and <code>y</code> data, the plot type and the
marker size. In the actual Plotly call we</p>
<p><div class="codehilite"><pre><span></span><span class="c1">// Call plotly</span>
<span class="kd">var</span> <span class="nx">myPlot</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;chart&#39;</span><span class="p">),</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span>  <span class="nx">x</span><span class="o">:</span><span class="nx">my</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span><span class="nx">my</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span>
                <span class="nx">mode</span><span class="o">:</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
                <span class="nx">marker</span><span class="o">:</span><span class="p">{</span><span class="nx">size</span><span class="o">:</span><span class="mi">5</span><span class="p">}</span> <span class="p">}</span> <span class="p">],</span>
    <span class="nx">layout</span> <span class="o">=</span> <span class="p">{</span> <span class="p">};</span>

<span class="nx">Plotly</span><span class="p">.</span><span class="nx">newPlot</span><span class="p">(</span><span class="s1">&#39;chart&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">layout</span><span class="p">,{</span><span class="nx">responsive</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</pre></div>
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Charts%20JS.imjoy.html#L45" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
<p>The last step is then you call this new plugin from within our native Python plugin.
This can be done with the api function <code>api.createWindow</code>. We create first a
dictionary containing the data we would like to send to the window plugin. This contains
also other required fields</p>
<ul>
<li><code>name</code>: is the title of the window that will be created</li>
<li><code>type</code>: this is the name of the window plugin, we would like to call, e.g. <code>Charts JS</code> in our example</li>
<li><code>w</code>, <code>h</code>: window width, and height</li>
<li><code>data</code>: containing the actual <code>x</code> and <code>y</code> values. Please note that numpy arrays
          are not supported and have to be converted to lists.</li>
</ul>
<p><div class="codehilite"><pre><span></span><span class="n">data_plot</span> <span class="o">=</span> <span class="p">{</span>   <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Plot charts - with JavaScript&#39;</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;Charts JS&#39;</span><span class="p">,</span>
                <span class="s1">&#39;w&#39;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
                <span class="s1">&#39;data&#39;</span><span class="p">:{</span>
                    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                    <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
<span class="n">await</span> <span class="n">api</span><span class="o">.</span><span class="n">createWindow</span><span class="p">(</span><span class="n">data_plot</span><span class="p">)</span>
</pre></div>
<a href="https://github.com/muellerflorian/ImJoy-demo-project/blob/master/imjoy-plugins/Sine%20Calculator.imjoy.html#L62" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
<p>When you now run the plugin, it will show a window with the calculated curve.</p>
<p><img src="../img/screenshot-plugin-plot.png" width="400px"></img></p>
<p><strong>Further information</strong></p>
<ul>
<li>For more infos on <code>api.createWindow</code> string, see <a href="https://imjoy.io/docs/#/api?id=apicreatewindow">here</a>.</li>
<li>For a more detailed information about how to plot data in JavaScript and how to
   refresh the window we refer this <a href="https://imjoy.io/docs/#/demos?id=python-plugin-displaying-a-chart">demo</a>.</li>
</ul>
<h2 id="exporting-the-plugin">Exporting the plugin<a class="headerlink" href="#exporting-the-plugin" title="Permanent link">&para;</a></h2>
<p>You can then download the plugin code from the editor. This will download a file
name with the name of the plugin, followed by a unique string, and the extension <code>.imjoy.html</code>.</p>
<p>We saved the two plugins it without the unique string in the folder <code>imjoy-plugin</code></p>
<ul>
<li><code>Sine Calculator.imjoy.html</code>: to perform calculations.</li>
<li><code>Charts JS.imjoy.html</code>: to display the data.</li>
</ul>
<p><a href="https://github.com/muellerflorian/ImJoy-demo-project/tree/master/imjoy-plugins" target="_blank"> <strong>See here &gt;&gt;</strong></a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../python-development/" title="4. Python development" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                4. Python development
              </span>
            </div>
          </a>
        
        
          <a href="../deployment/" title="6. Deployment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                6. Deployment
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Florian MUELLER
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/muellerflorian" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>